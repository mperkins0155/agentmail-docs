# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  inboxes: inboxes/__package__.yml
  threads: threads.yml
  messages: messages.yml
  domains: domains.yml

types:
  EventType:
    enum:
      - name: MESSAGE_RECEIVED
        value: message.received
      - name: MESSAGE_SENT
        value: message.sent
      - name: MESSAGE_DELIVERED
        value: message.delivered
      - name: MESSAGE_BOUNCED
        value: message.bounced
      - name: MESSAGE_COMPLAINED
        value: message.complained
      - name: MESSAGE_REJECTED
        value: message.rejected
      - name: DOMAIN_VERIFIED
        value: domain.verified

  EventTypes:
    type: list<EventType>
    docs: Event types for which to send events.

  PodIds:
    type: list<string>
    docs: Pods for which to send events. Maximum 10 per webhook.

  InboxIds:
    type: list<string>
    docs: Inboxes for which to send events. Maximum 10 per webhook.

  EventId:
    type: string
    docs: ID of event.

  Timestamp:
    type: datetime
    docs: Timestamp of event.

  Recipient:
    properties:
      address:
        type: string
        docs: Recipient address.
      status:
        type: string
        docs: Recipient status.

  Send:
    properties:
      inbox_id: inboxes.InboxId
      thread_id: threads.ThreadId
      message_id: messages.MessageId
      timestamp: Timestamp
      recipients:
        type: list<string>
        docs: Sent recipients.

  Delivery:
    properties:
      inbox_id: inboxes.InboxId
      thread_id: threads.ThreadId
      message_id: messages.MessageId
      timestamp: Timestamp
      recipients:
        type: list<string>
        docs: Delivered recipients.

  Bounce:
    properties:
      inbox_id: inboxes.InboxId
      thread_id: threads.ThreadId
      message_id: messages.MessageId
      timestamp: Timestamp
      type:
        type: string
        docs: Bounce type.
      sub_type:
        type: string
        docs: Bounce sub-type.
      recipients:
        type: list<Recipient>
        docs: Bounced recipients.

  Complaint:
    properties:
      inbox_id: inboxes.InboxId
      thread_id: threads.ThreadId
      message_id: messages.MessageId
      timestamp: Timestamp
      type:
        type: string
        docs: Complaint type.
      sub_type:
        type: string
        docs: Complaint sub-type.
      recipients:
        type: list<string>
        docs: Complained recipients.

  Reject:
    properties:
      inbox_id: inboxes.InboxId
      thread_id: threads.ThreadId
      message_id: messages.MessageId
      timestamp: Timestamp
      reason:
        type: string
        docs: Reject reason.

  MessageReceivedEvent:
    properties:
      type: literal<"event">
      event_type: literal<"message.received">
      event_id: EventId
      message: messages.Message
      thread: threads.ThreadItem

  MessageSentEvent:
    properties:
      type: literal<"event">
      event_type: literal<"message.sent">
      event_id: EventId
      send: Send

  MessageDeliveredEvent:
    properties:
      type: literal<"event">
      event_type: literal<"message.delivered">
      event_id: EventId
      delivery: Delivery

  MessageBouncedEvent:
    properties:
      type: literal<"event">
      event_type: literal<"message.bounced">
      event_id: EventId
      bounce: Bounce

  MessageComplainedEvent:
    properties:
      type: literal<"event">
      event_type: literal<"message.complained">
      event_id: EventId
      complaint: Complaint

  MessageRejectedEvent:
    properties:
      type: literal<"event">
      event_type: literal<"message.rejected">
      event_id: EventId
      reject: Reject

  DomainVerifiedEvent:
    properties:
      type: literal<"event">
      event_type: literal<"domain.verified">
      event_id: EventId
      domain: domains.Domain
